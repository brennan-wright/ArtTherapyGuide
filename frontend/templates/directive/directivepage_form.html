{% extends "base.html" %}
{% load static widget_tweaks %}
{% block content %}

<div class="container my-3">
    <h2 class="mb-3">Create New Directive</h2>
    <h5>General Informaiton</h5>
    <div class="col">
        <form action="" method="post">
            {% csrf_token %}

            {% for field in form.visible_fields %}
            <div class="mb-3">
                {{ field.label_tag }}
                {% render_field field class="form-control" placeholder="" %}
                {% if field.help_text %}
                <small class="form-text text-muted">{{ field.help_text }}</small>
                {% endif %}
            </div>
            {% endfor %}
            {% for hidden in form.hidden_fields %}

            {# Include the hidden fields in the form #}
            {{ hidden.errors.as_ul }}
            {% render_field hidden class="form-control" placeholder="" %}

            {% endfor %}


            {#https://github.com/adandan01/mybook #}

            <div>
                <h5>Directive Objectives</h5>
                <div class="mb-3">
                    {{ objectiveformset.management_form }}

                    {% for form in objectiveformset.forms %}
                    <div class="objective_formset_row input-group mb-3">
                        {% for field in form.visible_fields %}

                        {{ field.errors.as_ul }}
                        {% render_field field class="form-control" placeholder="" %}

                        {% endfor %}

                        {% for hidden in form.hidden_fields %}

                        {# Include the hidden fields in the form #}
                        {{ hidden.errors.as_ul }}
                        {% render_field hidden class="form-control" placeholder="" %}

                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>

            </div>
            <div>
                <h5>Directive Materials</h5>
                <div class="mb-3">
                    {{ materialformset.management_form }}

                    {% for form in materialformset.forms %}
                    <div class="material_formset_row input-group mb-3">
                        {% for field in form.visible_fields %}

                        {{ field.errors.as_ul }}
                        {% render_field field class="form-control" placeholder="" %}

                        {% endfor %}

                        {% for hidden in form.hidden_fields %}

                        {# Include the hidden fields in the form #}
                        {{ hidden.errors.as_ul }}
                        {% render_field hidden class="form-control" placeholder="" %}

                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>

            </div>
            <input class="btn btn-primary" type="submit" value="Save" />

        </form>
    </div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'formset/jquery.formset.js' %}"></script>
<script type="text/javascript">
    $(function () {
        $('.objective_formset_row').formset({
            prefix: '{{ objectiveformset.prefix}}'
        });
        $('.material_formset_row').formset({
            prefix: '{{ materialformset.prefix}}'
        });
    });
</script>
{% endblock %}

{% block extra_script %}
{% endblock extra_script %}